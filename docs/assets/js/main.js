const dropdown=document.querySelector(".js-dropdown"),container=document.querySelector(".dropdowncontainer"),arrow=document.querySelector(".js-arrow");function changeDropdown(){const e=container.classList.contains("hidden");arrow.classList.remove("changeArrow"),container.classList.add("hidden"),e?(arrow.classList.add("changeArrow"),arrow.classList.remove("dropdown__arrow"),container.classList.remove("hidden")):(arrow.classList.remove("changeArrow"),arrow.classList.add("dropdown__arrow"),container.classList.add("hidden"))}dropdown.addEventListener("click",changeDropdown);let date=new Date,ISOdate=date.toISOString(),formatDate=ISOdate.split("").splice(0,10).join("");const getElectricityPrice=()=>fetch(`https://electrike-otkzylkdbx.s3-eu-west-1.amazonaws.com/${formatDate}.json`).then(e=>e.json()).then(e=>{const t=e.pcb.map(e=>e.hour),r=e.pcb.map(e=>e.price.toFixed(5)),a=e.cym.map(e=>e.price.toFixed(5));console.log(e);let i=[];for(let e=0;e<t.length;e++){let c={hour:t[e]+":00",PCB:r[e],CYM:a[e]};i.push(c)}return i}).then(e=>{paintMinPricePCB(e),paintMaxPricePCB(e),paintMinPriceCYM(e),paintMaxPriceCYM(e),paintHours(e),paintPricesPCB(e),paintPricesCYM(e)});fetch(`https://electrike-otkzylkdbx.s3-eu-west-1.amazonaws.com/${formatDate}.json`).then(e=>e.json()).then(e=>{const t=e.pcb.map(e=>e.hour),r=e.pcb.map(e=>e.price.toFixed(5)),a=e.cym.map(e=>e.price.toFixed(5));console.log(e);let i=[];for(let e=0;e<t.length;e++){let c={hour:t[e]+":00",PCB:r[e],CYM:a[e]};i.push(c)}return i}).then(e=>{paintMinPricePCB(e),paintMaxPricePCB(e),paintMinPriceCYM(e),paintMaxPriceCYM(e),paintHours(e),paintPricesPCB(e),paintPricesCYM(e)});const infoDetailPCB=document.querySelector(".js-table"),hoursPCB=document.querySelector(".js-hourPCB"),pricesPCB=document.querySelector(".js-pricePCB"),variationPCB=document.querySelector(".js-varPCB"),hoursCYM=document.querySelector(".js-hourCYM"),pricesCYM=document.querySelector(".js-priceCYM"),variationCYM=document.querySelector(".js-varCYM"),paintHours=e=>{let t="";for(let r=0;r<e.length;r++)t+=`<p class="table__hour--item"> ${e[r].hour}</p>`;hoursPCB.innerHTML=t,hoursCYM.innerHTML=t},paintPricesPCB=e=>{let t="";for(let r=0;r<e.length;r++)t+=`<p class="table__price--item"> ${e[r].PCB} <span class="units">€/kWh</span></p>`;pricesPCB.innerHTML=t},paintPricesCYM=e=>{let t="";for(let r=0;r<e.length;r++)t+=`<p class="table__price--item"> ${e[r].CYM} <span class="units">€/kWh</span></p>`;pricesCYM.innerHTML=t},lowPricePCB=document.querySelector(".js-lowPCB"),highPricePCB=document.querySelector(".js-highPCB"),lowPriceCYM=document.querySelector(".js-lowCYM"),highPriceCYM=document.querySelector(".js-highCYM"),priceDate=document.querySelector(".js-date"),printDate=()=>{let e="";e+=`<p class="date__text">Fecha: ${formatDate}</p>`,priceDate.innerHTML=e};printDate();const paintMinPricePCB=e=>{let t="",r={PCB:1e3};for(let t=0;t<e.length;t++)e[t].PCB<r.PCB&&(r=e[t]);t+='<p class="priceTitle">Hora más barata</p>',t+=`<p> ${r.hour} -> ${r.PCB} €/kWh</p>`,lowPricePCB.innerHTML=t},paintMinPriceCYM=e=>{let t="",r={CYM:1e3};for(let t=0;t<e.length;t++)e[t].CYM<r.CYM&&(r=e[t]);t+='<p class="priceTitle">Hora más barata</p>',t+=`<p> ${r.hour} -> ${r.CYM} €/kWh</p>`,lowPriceCYM.innerHTML=t},paintMaxPricePCB=e=>{let t="",r={PCB:0};for(let t=0;t<e.length;t++)e[t].PCB>r.PCB&&(r=e[t]);t+='<p class="priceTitle">Hora más cara</p>',t+=`<p> ${r.hour} -> ${r.PCB} €/kWh</p>`,highPricePCB.innerHTML=t},paintMaxPriceCYM=e=>{let t="",r={CYM:0};for(let t=0;t<e.length;t++)e[t].CYM>r.CYM&&(r=e[t]);t+='<p class="priceTitle">Hora más cara</p>',t+=`<p> ${r.hour} -> ${r.CYM} €/kWh</p>`,highPriceCYM.innerHTML=t},tabsItem=Array.prototype.slice.apply(document.querySelectorAll(".tabs__item")),tablesItem=Array.prototype.slice.apply(document.querySelectorAll(".table__item")),resumeItem=Array.prototype.slice.apply(document.querySelectorAll(".resume__item")),tabs=document.getElementById("tabs"),handleClick=e=>{if(e.target.classList.contains("tabs__item")){let t=tabsItem.indexOf(e.target);tabsItem.map(e=>e.classList.remove("active")),tabsItem[t].classList.add("active"),tablesItem.map(e=>e.classList.remove("active")),tablesItem[t].classList.add("active"),resumeItem.map(e=>e.classList.remove("active")),resumeItem[t].classList.add("active")}};tabs.addEventListener("click",handleClick);